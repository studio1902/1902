1655982057a:5:{s:7:"wrapped";s:9601:"<pre><code data-theme='cobalt2' data-lang='javascript' class='torchlight has-highlight-lines' style='background-color: #193549; --theme-selection-background: #027dff;'><!-- Syntax highlighted by torchlight.dev --><div class='line'><span style="color:#aaa; text-align: right; -webkit-user-select: none; user-select: none;" class="line-number"> 1</span><span style="color: #0088FF;">// When a click event occurs on a feature in the places layer, open a popup at the</span></div><div class='line'><span style="color:#aaa; text-align: right; -webkit-user-select: none; user-select: none;" class="line-number"> 2</span><span style="color: #0088FF;">// location of the feature, with description HTML from its properties.</span></div><div class='line'><span style="color:#aaa; text-align: right; -webkit-user-select: none; user-select: none;" class="line-number"> 3</span><span style="color: #E1EFFF;">map.</span><span style="color: #FFC600;">on</span><span style="color: #E1EFFF;">(</span><span style="color: #92FC79;">&#39;</span><span style="color: #A5FF90;">click</span><span style="color: #92FC79;">&#39;</span><span style="color: #E1EFFF;">,</span><span style="color: #FFF;"> </span><span style="color: #92FC79;">&#39;</span><span style="color: #A5FF90;">features</span><span style="color: #92FC79;">&#39;</span><span style="color: #E1EFFF;">,</span><span style="color: #9EFFFF;"> </span><span style="color: #FFEE80;">(</span><span style="color: #E1EFFF;">e</span><span style="color: #FFEE80;">)</span><span style="color: #9EFFFF;"> </span><span style="color: #FFC600;">=&gt;</span><span style="color: #9EFFFF;"> </span><span style="color: #E1EFFF;">{</span></div><div class='line line-highlight line-has-background' style='background-color: #1F4662'><span style="color:#c6c6c6; text-align: right; -webkit-user-select: none; user-select: none;" class="line-number"> 4</span><span style="color: #E1EFFF;">    </span><span style="color: #0088FF;">// Copy coordinates array. </span></div><div class='line line-highlight line-has-background' style='background-color: #1F4662'><span style="color:#c6c6c6; text-align: right; -webkit-user-select: none; user-select: none;" class="line-number"> 5</span><span style="color: #9EFFFF;">    </span><span style="color: #FFC600;">const</span><span style="color: #9EFFFF;"> </span><span style="color: #E1EFFF;">coordinates</span><span style="color: #9EFFFF;"> </span><span style="color: #FF9D00;">=</span><span style="color: #9EFFFF;"> </span><span style="color: #E1EFFF;">e.features[</span><span style="color: #FF628C;">0</span><span style="color: #E1EFFF;">].geometry.coordinates.</span><span style="color: #FFC600;">slice</span><span style="color: #E1EFFF;">()</span></div><div class='line line-highlight line-has-background' style='background-color: #1F4662'><span style="color:#c6c6c6; text-align: right; -webkit-user-select: none; user-select: none;" class="line-number"> 6</span><span style="color: #9EFFFF;">    </span><span style="color: #FFC600;">const</span><span style="color: #9EFFFF;"> </span><span style="color: #E1EFFF;">description</span><span style="color: #9EFFFF;"> </span><span style="color: #FF9D00;">=</span><span style="color: #9EFFFF;"> </span><span style="color: #E1EFFF;">e.features[</span><span style="color: #FF628C;">0</span><span style="color: #E1EFFF;">].properties.description</span></div><div class='line'><span style="color:#aaa; text-align: right; -webkit-user-select: none; user-select: none;" class="line-number"> 7</span>&nbsp;</div><div class='line'><span style="color:#aaa; text-align: right; -webkit-user-select: none; user-select: none;" class="line-number"> 8</span><span style="color: #E1EFFF;">    </span><span style="color: #0088FF;">// Ensure that if the map is zoomed out such that multiple</span></div><div class='line'><span style="color:#aaa; text-align: right; -webkit-user-select: none; user-select: none;" class="line-number"> 9</span><span style="color: #E1EFFF;">    </span><span style="color: #0088FF;">// copies of the feature are visible, the popup appears</span></div><div class='line'><span style="color:#aaa; text-align: right; -webkit-user-select: none; user-select: none;" class="line-number">10</span><span style="color: #E1EFFF;">    </span><span style="color: #0088FF;">// over the copy being pointed to.</span></div><div class='line'><span style="color:#aaa; text-align: right; -webkit-user-select: none; user-select: none;" class="line-number">11</span><span style="color: #9EFFFF;">    </span><span style="color: #FF9D00;">while</span><span style="color: #9EFFFF;"> </span><span style="color: #E1EFFF;">(</span><span style="color: #80FFBB;">Math</span><span style="color: #E1EFFF;">.</span><span style="color: #FF9D00;">abs</span><span style="color: #E1EFFF;">(e.lngLat.lng</span><span style="color: #9EFFFF;"> </span><span style="color: #FF9D00;">-</span><span style="color: #9EFFFF;"> </span><span style="color: #E1EFFF;">coordinates[</span><span style="color: #FF628C;">0</span><span style="color: #E1EFFF;">])</span><span style="color: #9EFFFF;"> </span><span style="color: #FF9D00;">&gt;</span><span style="color: #9EFFFF;"> </span><span style="color: #FF628C;">180</span><span style="color: #E1EFFF;">)</span><span style="color: #9EFFFF;"> </span><span style="color: #E1EFFF;">{</span></div><div class='line'><span style="color:#aaa; text-align: right; -webkit-user-select: none; user-select: none;" class="line-number">12</span><span style="color: #9EFFFF;">        </span><span style="color: #E1EFFF;">coordinates[</span><span style="color: #FF628C;">0</span><span style="color: #E1EFFF;">]</span><span style="color: #9EFFFF;"> </span><span style="color: #FF9D00;">+=</span><span style="color: #9EFFFF;"> </span><span style="color: #E1EFFF;">e.lngLat.lng</span><span style="color: #9EFFFF;"> </span><span style="color: #FF9D00;">&gt;</span><span style="color: #9EFFFF;"> </span><span style="color: #E1EFFF;">coordinates[</span><span style="color: #FF628C;">0</span><span style="color: #E1EFFF;">]</span><span style="color: #9EFFFF;"> </span><span style="color: #FF9D00;">?</span><span style="color: #9EFFFF;"> </span><span style="color: #FF628C;">360</span><span style="color: #9EFFFF;"> </span><span style="color: #FF9D00;">:</span><span style="color: #9EFFFF;"> </span><span style="color: #FF9D00;">-</span><span style="color: #FF628C;">360</span></div><div class='line'><span style="color:#aaa; text-align: right; -webkit-user-select: none; user-select: none;" class="line-number">13</span><span style="color: #9EFFFF;">    </span><span style="color: #E1EFFF;">}</span></div><div class='line'><span style="color:#aaa; text-align: right; -webkit-user-select: none; user-select: none;" class="line-number">14</span>&nbsp;</div><div class='line'><span style="color:#aaa; text-align: right; -webkit-user-select: none; user-select: none;" class="line-number">15</span><span style="color: #9EFFFF;">    </span><span style="color: #E1EFFF;">map.</span><span style="color: #FFC600;">flyTo</span><span style="color: #E1EFFF;">({</span></div><div class='line'><span style="color:#aaa; text-align: right; -webkit-user-select: none; user-select: none;" class="line-number">16</span><span style="color: #9EFFFF;">        center</span><span style="color: #E1EFFF;">:</span><span style="color: #9EFFFF;"> </span><span style="color: #E1EFFF;">e.features[</span><span style="color: #FF628C;">0</span><span style="color: #E1EFFF;">].geometry.coordinates</span></div><div class='line'><span style="color:#aaa; text-align: right; -webkit-user-select: none; user-select: none;" class="line-number">17</span><span style="color: #9EFFFF;">    </span><span style="color: #E1EFFF;">})</span></div><div class='line'><span style="color:#aaa; text-align: right; -webkit-user-select: none; user-select: none;" class="line-number">18</span>&nbsp;</div><div class='line'><span style="color:#aaa; text-align: right; -webkit-user-select: none; user-select: none;" class="line-number">19</span><span style="color: #9EFFFF;">    </span><span style="color: #FF9D00;">new</span><span style="color: #9EFFFF;"> </span><span style="color: #E1EFFF;">mapboxgl.</span><span style="color: #FFC600;">Popup</span><span style="color: #E1EFFF;">()</span></div><div class='line'><span style="color:#aaa; text-align: right; -webkit-user-select: none; user-select: none;" class="line-number">20</span><span style="color: #9EFFFF;">        </span><span style="color: #E1EFFF;">.</span><span style="color: #FFC600;">setLngLat</span><span style="color: #E1EFFF;">(coordinates)</span></div><div class='line'><span style="color:#aaa; text-align: right; -webkit-user-select: none; user-select: none;" class="line-number">21</span><span style="color: #9EFFFF;">        </span><span style="color: #E1EFFF;">.</span><span style="color: #FFC600;">setHTML</span><span style="color: #E1EFFF;">(description)</span></div><div class='line'><span style="color:#aaa; text-align: right; -webkit-user-select: none; user-select: none;" class="line-number">22</span><span style="color: #9EFFFF;">        </span><span style="color: #E1EFFF;">.</span><span style="color: #FFC600;">addTo</span><span style="color: #E1EFFF;">(map)</span></div><div class='line'><span style="color:#aaa; text-align: right; -webkit-user-select: none; user-select: none;" class="line-number">23</span><span style="color: #9EFFFF;">    </span><span style="color: #E1EFFF;">}</span></div><div class='line'><span style="color:#aaa; text-align: right; -webkit-user-select: none; user-select: none;" class="line-number">24</span><span style="color: #E1EFFF;">)</span></div></code></pre>";s:11:"highlighted";s:9420:"<!-- Syntax highlighted by torchlight.dev --><div class='line'><span style="color:#aaa; text-align: right; -webkit-user-select: none; user-select: none;" class="line-number"> 1</span><span style="color: #0088FF;">// When a click event occurs on a feature in the places layer, open a popup at the</span></div><div class='line'><span style="color:#aaa; text-align: right; -webkit-user-select: none; user-select: none;" class="line-number"> 2</span><span style="color: #0088FF;">// location of the feature, with description HTML from its properties.</span></div><div class='line'><span style="color:#aaa; text-align: right; -webkit-user-select: none; user-select: none;" class="line-number"> 3</span><span style="color: #E1EFFF;">map.</span><span style="color: #FFC600;">on</span><span style="color: #E1EFFF;">(</span><span style="color: #92FC79;">&#39;</span><span style="color: #A5FF90;">click</span><span style="color: #92FC79;">&#39;</span><span style="color: #E1EFFF;">,</span><span style="color: #FFF;"> </span><span style="color: #92FC79;">&#39;</span><span style="color: #A5FF90;">features</span><span style="color: #92FC79;">&#39;</span><span style="color: #E1EFFF;">,</span><span style="color: #9EFFFF;"> </span><span style="color: #FFEE80;">(</span><span style="color: #E1EFFF;">e</span><span style="color: #FFEE80;">)</span><span style="color: #9EFFFF;"> </span><span style="color: #FFC600;">=&gt;</span><span style="color: #9EFFFF;"> </span><span style="color: #E1EFFF;">{</span></div><div class='line line-highlight line-has-background' style='background-color: #1F4662'><span style="color:#c6c6c6; text-align: right; -webkit-user-select: none; user-select: none;" class="line-number"> 4</span><span style="color: #E1EFFF;">    </span><span style="color: #0088FF;">// Copy coordinates array. </span></div><div class='line line-highlight line-has-background' style='background-color: #1F4662'><span style="color:#c6c6c6; text-align: right; -webkit-user-select: none; user-select: none;" class="line-number"> 5</span><span style="color: #9EFFFF;">    </span><span style="color: #FFC600;">const</span><span style="color: #9EFFFF;"> </span><span style="color: #E1EFFF;">coordinates</span><span style="color: #9EFFFF;"> </span><span style="color: #FF9D00;">=</span><span style="color: #9EFFFF;"> </span><span style="color: #E1EFFF;">e.features[</span><span style="color: #FF628C;">0</span><span style="color: #E1EFFF;">].geometry.coordinates.</span><span style="color: #FFC600;">slice</span><span style="color: #E1EFFF;">()</span></div><div class='line line-highlight line-has-background' style='background-color: #1F4662'><span style="color:#c6c6c6; text-align: right; -webkit-user-select: none; user-select: none;" class="line-number"> 6</span><span style="color: #9EFFFF;">    </span><span style="color: #FFC600;">const</span><span style="color: #9EFFFF;"> </span><span style="color: #E1EFFF;">description</span><span style="color: #9EFFFF;"> </span><span style="color: #FF9D00;">=</span><span style="color: #9EFFFF;"> </span><span style="color: #E1EFFF;">e.features[</span><span style="color: #FF628C;">0</span><span style="color: #E1EFFF;">].properties.description</span></div><div class='line'><span style="color:#aaa; text-align: right; -webkit-user-select: none; user-select: none;" class="line-number"> 7</span>&nbsp;</div><div class='line'><span style="color:#aaa; text-align: right; -webkit-user-select: none; user-select: none;" class="line-number"> 8</span><span style="color: #E1EFFF;">    </span><span style="color: #0088FF;">// Ensure that if the map is zoomed out such that multiple</span></div><div class='line'><span style="color:#aaa; text-align: right; -webkit-user-select: none; user-select: none;" class="line-number"> 9</span><span style="color: #E1EFFF;">    </span><span style="color: #0088FF;">// copies of the feature are visible, the popup appears</span></div><div class='line'><span style="color:#aaa; text-align: right; -webkit-user-select: none; user-select: none;" class="line-number">10</span><span style="color: #E1EFFF;">    </span><span style="color: #0088FF;">// over the copy being pointed to.</span></div><div class='line'><span style="color:#aaa; text-align: right; -webkit-user-select: none; user-select: none;" class="line-number">11</span><span style="color: #9EFFFF;">    </span><span style="color: #FF9D00;">while</span><span style="color: #9EFFFF;"> </span><span style="color: #E1EFFF;">(</span><span style="color: #80FFBB;">Math</span><span style="color: #E1EFFF;">.</span><span style="color: #FF9D00;">abs</span><span style="color: #E1EFFF;">(e.lngLat.lng</span><span style="color: #9EFFFF;"> </span><span style="color: #FF9D00;">-</span><span style="color: #9EFFFF;"> </span><span style="color: #E1EFFF;">coordinates[</span><span style="color: #FF628C;">0</span><span style="color: #E1EFFF;">])</span><span style="color: #9EFFFF;"> </span><span style="color: #FF9D00;">&gt;</span><span style="color: #9EFFFF;"> </span><span style="color: #FF628C;">180</span><span style="color: #E1EFFF;">)</span><span style="color: #9EFFFF;"> </span><span style="color: #E1EFFF;">{</span></div><div class='line'><span style="color:#aaa; text-align: right; -webkit-user-select: none; user-select: none;" class="line-number">12</span><span style="color: #9EFFFF;">        </span><span style="color: #E1EFFF;">coordinates[</span><span style="color: #FF628C;">0</span><span style="color: #E1EFFF;">]</span><span style="color: #9EFFFF;"> </span><span style="color: #FF9D00;">+=</span><span style="color: #9EFFFF;"> </span><span style="color: #E1EFFF;">e.lngLat.lng</span><span style="color: #9EFFFF;"> </span><span style="color: #FF9D00;">&gt;</span><span style="color: #9EFFFF;"> </span><span style="color: #E1EFFF;">coordinates[</span><span style="color: #FF628C;">0</span><span style="color: #E1EFFF;">]</span><span style="color: #9EFFFF;"> </span><span style="color: #FF9D00;">?</span><span style="color: #9EFFFF;"> </span><span style="color: #FF628C;">360</span><span style="color: #9EFFFF;"> </span><span style="color: #FF9D00;">:</span><span style="color: #9EFFFF;"> </span><span style="color: #FF9D00;">-</span><span style="color: #FF628C;">360</span></div><div class='line'><span style="color:#aaa; text-align: right; -webkit-user-select: none; user-select: none;" class="line-number">13</span><span style="color: #9EFFFF;">    </span><span style="color: #E1EFFF;">}</span></div><div class='line'><span style="color:#aaa; text-align: right; -webkit-user-select: none; user-select: none;" class="line-number">14</span>&nbsp;</div><div class='line'><span style="color:#aaa; text-align: right; -webkit-user-select: none; user-select: none;" class="line-number">15</span><span style="color: #9EFFFF;">    </span><span style="color: #E1EFFF;">map.</span><span style="color: #FFC600;">flyTo</span><span style="color: #E1EFFF;">({</span></div><div class='line'><span style="color:#aaa; text-align: right; -webkit-user-select: none; user-select: none;" class="line-number">16</span><span style="color: #9EFFFF;">        center</span><span style="color: #E1EFFF;">:</span><span style="color: #9EFFFF;"> </span><span style="color: #E1EFFF;">e.features[</span><span style="color: #FF628C;">0</span><span style="color: #E1EFFF;">].geometry.coordinates</span></div><div class='line'><span style="color:#aaa; text-align: right; -webkit-user-select: none; user-select: none;" class="line-number">17</span><span style="color: #9EFFFF;">    </span><span style="color: #E1EFFF;">})</span></div><div class='line'><span style="color:#aaa; text-align: right; -webkit-user-select: none; user-select: none;" class="line-number">18</span>&nbsp;</div><div class='line'><span style="color:#aaa; text-align: right; -webkit-user-select: none; user-select: none;" class="line-number">19</span><span style="color: #9EFFFF;">    </span><span style="color: #FF9D00;">new</span><span style="color: #9EFFFF;"> </span><span style="color: #E1EFFF;">mapboxgl.</span><span style="color: #FFC600;">Popup</span><span style="color: #E1EFFF;">()</span></div><div class='line'><span style="color:#aaa; text-align: right; -webkit-user-select: none; user-select: none;" class="line-number">20</span><span style="color: #9EFFFF;">        </span><span style="color: #E1EFFF;">.</span><span style="color: #FFC600;">setLngLat</span><span style="color: #E1EFFF;">(coordinates)</span></div><div class='line'><span style="color:#aaa; text-align: right; -webkit-user-select: none; user-select: none;" class="line-number">21</span><span style="color: #9EFFFF;">        </span><span style="color: #E1EFFF;">.</span><span style="color: #FFC600;">setHTML</span><span style="color: #E1EFFF;">(description)</span></div><div class='line'><span style="color:#aaa; text-align: right; -webkit-user-select: none; user-select: none;" class="line-number">22</span><span style="color: #9EFFFF;">        </span><span style="color: #E1EFFF;">.</span><span style="color: #FFC600;">addTo</span><span style="color: #E1EFFF;">(map)</span></div><div class='line'><span style="color:#aaa; text-align: right; -webkit-user-select: none; user-select: none;" class="line-number">23</span><span style="color: #9EFFFF;">    </span><span style="color: #E1EFFF;">}</span></div><div class='line'><span style="color:#aaa; text-align: right; -webkit-user-select: none; user-select: none;" class="line-number">24</span><span style="color: #E1EFFF;">)</span></div>";s:6:"styles";s:65:"background-color: #193549; --theme-selection-background: #027dff;";s:7:"classes";s:30:"torchlight has-highlight-lines";s:5:"attrs";a:2:{s:10:"data-theme";s:7:"cobalt2";s:9:"data-lang";s:10:"javascript";}}