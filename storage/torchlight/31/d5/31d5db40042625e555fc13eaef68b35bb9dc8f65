1655982256a:5:{s:7:"wrapped";s:22127:"<pre><code data-theme='cobalt2' data-lang='javascript' class='torchlight has-highlight-lines' style='background-color: #193549; --theme-selection-background: #027dff;'><!-- Syntax highlighted by torchlight.dev --><div class='line'><span style="color:#aaa; text-align: right; -webkit-user-select: none; user-select: none;" class="line-number"> 1</span><span style="color: #E1EFFF;">window.</span><span style="color: #FFC600;">map</span><span style="color: #FFF;"> </span><span style="color: #FF9D00;">=</span><span style="color: #FFF;"> </span><span style="color: #FB94FF;">function</span><span style="color: #9EFFFF;"> </span><span style="color: #FFEE80;">()</span><span style="color: #9EFFFF;"> </span><span style="color: #E1EFFF;">{</span></div><div class='line'><span style="color:#aaa; text-align: right; -webkit-user-select: none; user-select: none;" class="line-number"> 2</span><span style="color: #9EFFFF;">    </span><span style="color: #FF9D00;">return</span><span style="color: #9EFFFF;"> </span><span style="color: #E1EFFF;">{</span></div><div class='line'><span style="color:#aaa; text-align: right; -webkit-user-select: none; user-select: none;" class="line-number"> 3</span><span style="color: #E1EFFF;">        </span><span style="color: #0088FF;">// The modal is closed by default.</span></div><div class='line'><span style="color:#aaa; text-align: right; -webkit-user-select: none; user-select: none;" class="line-number"> 4</span><span style="color: #9EFFFF;">        open</span><span style="color: #E1EFFF;">:</span><span style="color: #9EFFFF;"> </span><span style="color: #FF628C;">false</span><span style="color: #E1EFFF;">,</span></div><div class='line line-highlight line-has-background' style='background-color: #1F4662'><span style="color:#c6c6c6; text-align: right; -webkit-user-select: none; user-select: none;" class="line-number"> 5</span><span style="color: #E1EFFF;">        </span><span style="color: #0088FF;">// The map should only be rendered once. </span></div><div class='line line-highlight line-has-background' style='background-color: #1F4662'><span style="color:#c6c6c6; text-align: right; -webkit-user-select: none; user-select: none;" class="line-number"> 6</span><span style="color: #9EFFFF;">        rendered</span><span style="color: #E1EFFF;">:</span><span style="color: #9EFFFF;"> </span><span style="color: #FF628C;">false</span><span style="color: #E1EFFF;">,</span></div><div class='line'><span style="color:#aaa; text-align: right; -webkit-user-select: none; user-select: none;" class="line-number"> 7</span><span style="color: #9EFFFF;">        component</span><span style="color: #E1EFFF;">:</span><span style="color: #9EFFFF;"> </span><span style="color: #E1EFFF;">{</span></div><div class='line'><span style="color:#aaa; text-align: right; -webkit-user-select: none; user-select: none;" class="line-number"> 8</span><span style="color: #E1EFFF;">            </span><span style="color: #0088FF;">// Show the modal when this.open.</span></div><div class='line'><span style="color:#aaa; text-align: right; -webkit-user-select: none; user-select: none;" class="line-number"> 9</span><span style="color: #9EFFFF;">            </span><span style="color: #92FC79;">&#39;</span><span style="color: #A5FF90;">x-show</span><span style="color: #92FC79;">&#39;</span><span style="color: #FFEE80;">()</span><span style="color: #9EFFFF;"> </span><span style="color: #E1EFFF;">{</span></div><div class='line'><span style="color:#aaa; text-align: right; -webkit-user-select: none; user-select: none;" class="line-number">10</span><span style="color: #9EFFFF;">                </span><span style="color: #FF9D00;">return</span><span style="color: #9EFFFF;"> </span><span style="color: #FB94FF;">this</span><span style="color: #E1EFFF;">.open</span></div><div class='line'><span style="color:#aaa; text-align: right; -webkit-user-select: none; user-select: none;" class="line-number">11</span><span style="color: #9EFFFF;">            </span><span style="color: #E1EFFF;">},</span></div><div class='line line-highlight line-has-background' style='background-color: #1F4662'><span style="color:#c6c6c6; text-align: right; -webkit-user-select: none; user-select: none;" class="line-number">12</span><span style="color: #E1EFFF;">            </span><span style="color: #0088FF;">// Open the map from a URL hash. </span></div><div class='line line-highlight line-has-background' style='background-color: #1F4662'><span style="color:#c6c6c6; text-align: right; -webkit-user-select: none; user-select: none;" class="line-number">13</span><span style="color: #9EFFFF;">            </span><span style="color: #92FC79;">&#39;</span><span style="color: #A5FF90;">x-init</span><span style="color: #92FC79;">&#39;</span><span style="color: #FFEE80;">()</span><span style="color: #9EFFFF;"> </span><span style="color: #E1EFFF;">{</span></div><div class='line line-highlight line-has-background' style='background-color: #1F4662'><span style="color:#c6c6c6; text-align: right; -webkit-user-select: none; user-select: none;" class="line-number">14</span><span style="color: #9EFFFF;">                </span><span style="color: #FF9D00;">return</span><span style="color: #9EFFFF;"> </span><span style="color: #E1EFFF;">window.location.hash</span><span style="color: #9EFFFF;"> </span><span style="color: #FF9D00;">===</span><span style="color: #9EFFFF;"> </span><span style="color: #92FC79;">&#39;</span><span style="color: #A5FF90;">#map</span><span style="color: #92FC79;">&#39;</span></div><div class='line line-highlight line-has-background' style='background-color: #1F4662'><span style="color:#c6c6c6; text-align: right; -webkit-user-select: none; user-select: none;" class="line-number">15</span><span style="color: #9EFFFF;">                    </span><span style="color: #FF9D00;">?</span><span style="color: #9EFFFF;"> </span><span style="color: #E1EFFF;">(</span><span style="color: #FB94FF;">this</span><span style="color: #E1EFFF;">.open</span><span style="color: #9EFFFF;"> </span><span style="color: #FF9D00;">=</span><span style="color: #9EFFFF;"> </span><span style="color: #FF628C;">true</span><span style="color: #E1EFFF;">,</span><span style="color: #9EFFFF;"> </span><span style="color: #FB94FF;">this</span><span style="color: #E1EFFF;">.</span><span style="color: #FFC600;">$nextTick</span><span style="color: #E1EFFF;">(</span><span style="color: #FFEE80;">()</span><span style="color: #9EFFFF;"> </span><span style="color: #FFC600;">=&gt;</span><span style="color: #9EFFFF;"> </span><span style="color: #E1EFFF;">{</span><span style="color: #9EFFFF;"> </span><span style="color: #FF9D00;">setTimeout</span><span style="color: #E1EFFF;">(</span><span style="color: #FFEE80;">()</span><span style="color: #9EFFFF;"> </span><span style="color: #FFC600;">=&gt;</span><span style="color: #9EFFFF;"> </span><span style="color: #E1EFFF;">{</span><span style="color: #9EFFFF;"> </span><span style="color: #FB94FF;">this</span><span style="color: #E1EFFF;">.</span><span style="color: #FFC600;">renderMap</span><span style="color: #E1EFFF;">(),</span><span style="color: #9EFFFF;"> </span><span style="color: #FB94FF;">this</span><span style="color: #E1EFFF;">.rendered</span><span style="color: #9EFFFF;"> </span><span style="color: #FF9D00;">=</span><span style="color: #9EFFFF;"> </span><span style="color: #FF628C;">true</span><span style="color: #9EFFFF;"> </span><span style="color: #E1EFFF;">},</span><span style="color: #9EFFFF;"> </span><span style="color: #FF628C;">300</span><span style="color: #E1EFFF;">)</span><span style="color: #9EFFFF;"> </span><span style="color: #E1EFFF;">}))</span></div><div class='line line-highlight line-has-background' style='background-color: #1F4662'><span style="color:#c6c6c6; text-align: right; -webkit-user-select: none; user-select: none;" class="line-number">16</span><span style="color: #9EFFFF;">                    </span><span style="color: #FF9D00;">:</span><span style="color: #9EFFFF;"> </span><span style="color: #FB94FF;">this</span><span style="color: #E1EFFF;">.open</span><span style="color: #9EFFFF;"> </span><span style="color: #FF9D00;">=</span><span style="color: #9EFFFF;"> </span><span style="color: #FF628C;">false</span></div><div class='line line-highlight line-has-background' style='background-color: #1F4662'><span style="color:#c6c6c6; text-align: right; -webkit-user-select: none; user-select: none;" class="line-number">17</span><span style="color: #9EFFFF;">            </span><span style="color: #E1EFFF;">},</span></div><div class='line line-highlight line-has-background' style='background-color: #1F4662'><span style="color:#c6c6c6; text-align: right; -webkit-user-select: none; user-select: none;" class="line-number">18</span><span style="color: #E1EFFF;">            </span><span style="color: #0088FF;">// Update the URL hash.</span></div><div class='line line-highlight line-has-background' style='background-color: #1F4662'><span style="color:#c6c6c6; text-align: right; -webkit-user-select: none; user-select: none;" class="line-number">19</span><span style="color: #9EFFFF;">            </span><span style="color: #92FC79;">&#39;</span><span style="color: #A5FF90;">x-effect</span><span style="color: #92FC79;">&#39;</span><span style="color: #FFEE80;">()</span><span style="color: #9EFFFF;"> </span><span style="color: #E1EFFF;">{</span></div><div class='line line-highlight line-has-background' style='background-color: #1F4662'><span style="color:#c6c6c6; text-align: right; -webkit-user-select: none; user-select: none;" class="line-number">20</span><span style="color: #9EFFFF;">                </span><span style="color: #FF9D00;">return</span><span style="color: #9EFFFF;"> </span><span style="color: #FB94FF;">this</span><span style="color: #E1EFFF;">.open</span></div><div class='line line-highlight line-has-background' style='background-color: #1F4662'><span style="color:#c6c6c6; text-align: right; -webkit-user-select: none; user-select: none;" class="line-number">21</span><span style="color: #9EFFFF;">                    </span><span style="color: #FF9D00;">?</span><span style="color: #9EFFFF;"> </span><span style="color: #E1EFFF;">history.</span><span style="color: #FFC600;">pushState</span><span style="color: #E1EFFF;">({},</span><span style="color: #9EFFFF;"> </span><span style="color: #92FC79;">&#39;&#39;</span><span style="color: #E1EFFF;">,</span><span style="color: #9EFFFF;"> </span><span style="color: #92FC79;">&#39;</span><span style="color: #A5FF90;">#map</span><span style="color: #92FC79;">&#39;</span><span style="color: #E1EFFF;">)</span></div><div class='line line-highlight line-has-background' style='background-color: #1F4662'><span style="color:#c6c6c6; text-align: right; -webkit-user-select: none; user-select: none;" class="line-number">22</span><span style="color: #9EFFFF;">                    </span><span style="color: #FF9D00;">:</span><span style="color: #9EFFFF;"> </span><span style="color: #E1EFFF;">history.</span><span style="color: #FFC600;">pushState</span><span style="color: #E1EFFF;">({},</span><span style="color: #9EFFFF;"> </span><span style="color: #92FC79;">&#39;&#39;</span><span style="color: #E1EFFF;">,</span><span style="color: #9EFFFF;"> </span><span style="color: #E1EFFF;">window.location.pathname)</span></div><div class='line line-highlight line-has-background' style='background-color: #1F4662'><span style="color:#c6c6c6; text-align: right; -webkit-user-select: none; user-select: none;" class="line-number">23</span><span style="color: #9EFFFF;">            </span><span style="color: #E1EFFF;">},</span></div><div class='line'><span style="color:#aaa; text-align: right; -webkit-user-select: none; user-select: none;" class="line-number">24</span><span style="color: #E1EFFF;">            </span><span style="color: #0088FF;">// Focus trap the modal.</span></div><div class='line'><span style="color:#aaa; text-align: right; -webkit-user-select: none; user-select: none;" class="line-number">25</span><span style="color: #9EFFFF;">            </span><span style="color: #92FC79;">&#39;</span><span style="color: #A5FF90;">x-trap.inert.noscroll</span><span style="color: #92FC79;">&#39;</span><span style="color: #FFEE80;">()</span><span style="color: #9EFFFF;"> </span><span style="color: #E1EFFF;">{</span></div><div class='line'><span style="color:#aaa; text-align: right; -webkit-user-select: none; user-select: none;" class="line-number">26</span><span style="color: #9EFFFF;">                </span><span style="color: #FF9D00;">return</span><span style="color: #9EFFFF;"> </span><span style="color: #FB94FF;">this</span><span style="color: #E1EFFF;">.open</span></div><div class='line'><span style="color:#aaa; text-align: right; -webkit-user-select: none; user-select: none;" class="line-number">27</span><span style="color: #9EFFFF;">            </span><span style="color: #E1EFFF;">},</span></div><div class='line line-highlight line-has-background' style='background-color: #1F4662'><span style="color:#c6c6c6; text-align: right; -webkit-user-select: none; user-select: none;" class="line-number">28</span><span style="color: #E1EFFF;">            </span><span style="color: #0088FF;">// Listen to an open-map event and when it&#39;s dispatched open the modal and render the map. </span></div><div class='line line-highlight line-has-background' style='background-color: #1F4662'><span style="color:#c6c6c6; text-align: right; -webkit-user-select: none; user-select: none;" class="line-number">29</span><span style="color: #9EFFFF;">            </span><span style="color: #92FC79;">&#39;</span><span style="color: #A5FF90;">@open-map.window</span><span style="color: #92FC79;">&#39;</span><span style="color: #FFEE80;">()</span><span style="color: #9EFFFF;"> </span><span style="color: #E1EFFF;">{</span></div><div class='line line-highlight line-has-background' style='background-color: #1F4662'><span style="color:#c6c6c6; text-align: right; -webkit-user-select: none; user-select: none;" class="line-number">30</span><span style="color: #9EFFFF;">                </span><span style="color: #FF9D00;">return</span><span style="color: #9EFFFF;"> </span><span style="color: #FB94FF;">this</span><span style="color: #E1EFFF;">.rendered</span></div><div class='line line-highlight line-has-background' style='background-color: #1F4662'><span style="color:#c6c6c6; text-align: right; -webkit-user-select: none; user-select: none;" class="line-number">31</span><span style="color: #9EFFFF;">                    </span><span style="color: #FF9D00;">?</span><span style="color: #9EFFFF;"> </span><span style="color: #FB94FF;">this</span><span style="color: #E1EFFF;">.open</span><span style="color: #9EFFFF;"> </span><span style="color: #FF9D00;">=</span><span style="color: #9EFFFF;"> </span><span style="color: #FF628C;">true</span></div><div class='line line-highlight line-has-background' style='background-color: #1F4662'><span style="color:#c6c6c6; text-align: right; -webkit-user-select: none; user-select: none;" class="line-number">32</span><span style="color: #9EFFFF;">                    </span><span style="color: #FF9D00;">:</span><span style="color: #9EFFFF;"> </span><span style="color: #E1EFFF;">(</span><span style="color: #FB94FF;">this</span><span style="color: #E1EFFF;">.open</span><span style="color: #9EFFFF;"> </span><span style="color: #FF9D00;">=</span><span style="color: #9EFFFF;"> </span><span style="color: #FF628C;">true</span><span style="color: #E1EFFF;">,</span><span style="color: #9EFFFF;"> </span><span style="color: #FB94FF;">this</span><span style="color: #E1EFFF;">.</span><span style="color: #FFC600;">$nextTick</span><span style="color: #E1EFFF;">(</span><span style="color: #FFEE80;">()</span><span style="color: #9EFFFF;"> </span><span style="color: #FFC600;">=&gt;</span><span style="color: #9EFFFF;"> </span><span style="color: #E1EFFF;">{</span><span style="color: #9EFFFF;"> </span><span style="color: #FF9D00;">setTimeout</span><span style="color: #E1EFFF;">(</span><span style="color: #FFEE80;">()</span><span style="color: #9EFFFF;"> </span><span style="color: #FFC600;">=&gt;</span><span style="color: #9EFFFF;"> </span><span style="color: #E1EFFF;">{</span><span style="color: #9EFFFF;"> </span><span style="color: #FB94FF;">this</span><span style="color: #E1EFFF;">.</span><span style="color: #FFC600;">renderMap</span><span style="color: #E1EFFF;">(),</span><span style="color: #9EFFFF;"> </span><span style="color: #FB94FF;">this</span><span style="color: #E1EFFF;">.rendered</span><span style="color: #9EFFFF;"> </span><span style="color: #FF9D00;">=</span><span style="color: #9EFFFF;"> </span><span style="color: #FF628C;">true</span><span style="color: #9EFFFF;"> </span><span style="color: #E1EFFF;">},</span><span style="color: #9EFFFF;"> </span><span style="color: #FF628C;">300</span><span style="color: #E1EFFF;">)</span><span style="color: #9EFFFF;"> </span><span style="color: #E1EFFF;">}))</span></div><div class='line line-highlight line-has-background' style='background-color: #1F4662'><span style="color:#c6c6c6; text-align: right; -webkit-user-select: none; user-select: none;" class="line-number">33</span><span style="color: #9EFFFF;">            </span><span style="color: #E1EFFF;">},</span></div><div class='line line-highlight line-has-background' style='background-color: #1F4662'><span style="color:#c6c6c6; text-align: right; -webkit-user-select: none; user-select: none;" class="line-number">34</span><span style="color: #E1EFFF;">            </span><span style="color: #0088FF;">// Close the map with escape.</span></div><div class='line'><span style="color:#aaa; text-align: right; -webkit-user-select: none; user-select: none;" class="line-number">35</span><span style="color: #9EFFFF;">            </span><span style="color: #92FC79;">&#39;</span><span style="color: #A5FF90;">@keydown.window.escape</span><span style="color: #92FC79;">&#39;</span><span style="color: #FFEE80;">()</span><span style="color: #9EFFFF;"> </span><span style="color: #E1EFFF;">{</span></div><div class='line'><span style="color:#aaa; text-align: right; -webkit-user-select: none; user-select: none;" class="line-number">36</span><span style="color: #9EFFFF;">                </span><span style="color: #FB94FF;">this</span><span style="color: #E1EFFF;">.open</span><span style="color: #9EFFFF;"> </span><span style="color: #FF9D00;">=</span><span style="color: #9EFFFF;"> </span><span style="color: #FF628C;">false</span></div><div class='line'><span style="color:#aaa; text-align: right; -webkit-user-select: none; user-select: none;" class="line-number">37</span><span style="color: #9EFFFF;">            </span><span style="color: #E1EFFF;">}</span></div><div class='line'><span style="color:#aaa; text-align: right; -webkit-user-select: none; user-select: none;" class="line-number">38</span><span style="color: #9EFFFF;">        </span><span style="color: #E1EFFF;">},</span></div><div class='line'><span style="color:#aaa; text-align: right; -webkit-user-select: none; user-select: none;" class="line-number">39</span><span style="color: #9EFFFF;">        button</span><span style="color: #E1EFFF;">:</span><span style="color: #9EFFFF;"> </span><span style="color: #E1EFFF;">{</span></div><div class='line'><span style="color:#aaa; text-align: right; -webkit-user-select: none; user-select: none;" class="line-number">40</span><span style="color: #E1EFFF;">            </span><span style="color: #0088FF;">// The close button in the modal.</span></div><div class='line'><span style="color:#aaa; text-align: right; -webkit-user-select: none; user-select: none;" class="line-number">41</span><span style="color: #9EFFFF;">            </span><span style="color: #92FC79;">&#39;</span><span style="color: #A5FF90;">@click</span><span style="color: #92FC79;">&#39;</span><span style="color: #FFEE80;">()</span><span style="color: #9EFFFF;"> </span><span style="color: #E1EFFF;">{</span></div><div class='line'><span style="color:#aaa; text-align: right; -webkit-user-select: none; user-select: none;" class="line-number">42</span><span style="color: #9EFFFF;">                </span><span style="color: #FB94FF;">this</span><span style="color: #E1EFFF;">.open</span><span style="color: #9EFFFF;"> </span><span style="color: #FF9D00;">=</span><span style="color: #9EFFFF;"> </span><span style="color: #FF628C;">false</span></div><div class='line'><span style="color:#aaa; text-align: right; -webkit-user-select: none; user-select: none;" class="line-number">43</span><span style="color: #9EFFFF;">            </span><span style="color: #E1EFFF;">}</span></div><div class='line'><span style="color:#aaa; text-align: right; -webkit-user-select: none; user-select: none;" class="line-number">44</span><span style="color: #9EFFFF;">        </span><span style="color: #E1EFFF;">},</span></div><div class='line'><span style="color:#aaa; text-align: right; -webkit-user-select: none; user-select: none;" class="line-number">45</span><span style="color: #9EFFFF;">        </span><span style="color: #FFC600;">renderMap</span><span style="color: #FFEE80;">()</span><span style="color: #9EFFFF;"> </span><span style="color: #E1EFFF;">{</span></div><div class='line'><span style="color:#aaa; text-align: right; -webkit-user-select: none; user-select: none;" class="line-number">46</span><span style="color: #E1EFFF;">            </span><span style="color: #0088FF;">// All of the above Mapbox logic.</span></div><div class='line'><span style="color:#aaa; text-align: right; -webkit-user-select: none; user-select: none;" class="line-number">47</span><span style="color: #9EFFFF;">        </span><span style="color: #E1EFFF;">}</span></div><div class='line'><span style="color:#aaa; text-align: right; -webkit-user-select: none; user-select: none;" class="line-number">48</span><span style="color: #9EFFFF;">    </span><span style="color: #E1EFFF;">}</span></div><div class='line'><span style="color:#aaa; text-align: right; -webkit-user-select: none; user-select: none;" class="line-number">49</span><span style="color: #E1EFFF;">}</span></div></code></pre>";s:11:"highlighted";s:21946:"<!-- Syntax highlighted by torchlight.dev --><div class='line'><span style="color:#aaa; text-align: right; -webkit-user-select: none; user-select: none;" class="line-number"> 1</span><span style="color: #E1EFFF;">window.</span><span style="color: #FFC600;">map</span><span style="color: #FFF;"> </span><span style="color: #FF9D00;">=</span><span style="color: #FFF;"> </span><span style="color: #FB94FF;">function</span><span style="color: #9EFFFF;"> </span><span style="color: #FFEE80;">()</span><span style="color: #9EFFFF;"> </span><span style="color: #E1EFFF;">{</span></div><div class='line'><span style="color:#aaa; text-align: right; -webkit-user-select: none; user-select: none;" class="line-number"> 2</span><span style="color: #9EFFFF;">    </span><span style="color: #FF9D00;">return</span><span style="color: #9EFFFF;"> </span><span style="color: #E1EFFF;">{</span></div><div class='line'><span style="color:#aaa; text-align: right; -webkit-user-select: none; user-select: none;" class="line-number"> 3</span><span style="color: #E1EFFF;">        </span><span style="color: #0088FF;">// The modal is closed by default.</span></div><div class='line'><span style="color:#aaa; text-align: right; -webkit-user-select: none; user-select: none;" class="line-number"> 4</span><span style="color: #9EFFFF;">        open</span><span style="color: #E1EFFF;">:</span><span style="color: #9EFFFF;"> </span><span style="color: #FF628C;">false</span><span style="color: #E1EFFF;">,</span></div><div class='line line-highlight line-has-background' style='background-color: #1F4662'><span style="color:#c6c6c6; text-align: right; -webkit-user-select: none; user-select: none;" class="line-number"> 5</span><span style="color: #E1EFFF;">        </span><span style="color: #0088FF;">// The map should only be rendered once. </span></div><div class='line line-highlight line-has-background' style='background-color: #1F4662'><span style="color:#c6c6c6; text-align: right; -webkit-user-select: none; user-select: none;" class="line-number"> 6</span><span style="color: #9EFFFF;">        rendered</span><span style="color: #E1EFFF;">:</span><span style="color: #9EFFFF;"> </span><span style="color: #FF628C;">false</span><span style="color: #E1EFFF;">,</span></div><div class='line'><span style="color:#aaa; text-align: right; -webkit-user-select: none; user-select: none;" class="line-number"> 7</span><span style="color: #9EFFFF;">        component</span><span style="color: #E1EFFF;">:</span><span style="color: #9EFFFF;"> </span><span style="color: #E1EFFF;">{</span></div><div class='line'><span style="color:#aaa; text-align: right; -webkit-user-select: none; user-select: none;" class="line-number"> 8</span><span style="color: #E1EFFF;">            </span><span style="color: #0088FF;">// Show the modal when this.open.</span></div><div class='line'><span style="color:#aaa; text-align: right; -webkit-user-select: none; user-select: none;" class="line-number"> 9</span><span style="color: #9EFFFF;">            </span><span style="color: #92FC79;">&#39;</span><span style="color: #A5FF90;">x-show</span><span style="color: #92FC79;">&#39;</span><span style="color: #FFEE80;">()</span><span style="color: #9EFFFF;"> </span><span style="color: #E1EFFF;">{</span></div><div class='line'><span style="color:#aaa; text-align: right; -webkit-user-select: none; user-select: none;" class="line-number">10</span><span style="color: #9EFFFF;">                </span><span style="color: #FF9D00;">return</span><span style="color: #9EFFFF;"> </span><span style="color: #FB94FF;">this</span><span style="color: #E1EFFF;">.open</span></div><div class='line'><span style="color:#aaa; text-align: right; -webkit-user-select: none; user-select: none;" class="line-number">11</span><span style="color: #9EFFFF;">            </span><span style="color: #E1EFFF;">},</span></div><div class='line line-highlight line-has-background' style='background-color: #1F4662'><span style="color:#c6c6c6; text-align: right; -webkit-user-select: none; user-select: none;" class="line-number">12</span><span style="color: #E1EFFF;">            </span><span style="color: #0088FF;">// Open the map from a URL hash. </span></div><div class='line line-highlight line-has-background' style='background-color: #1F4662'><span style="color:#c6c6c6; text-align: right; -webkit-user-select: none; user-select: none;" class="line-number">13</span><span style="color: #9EFFFF;">            </span><span style="color: #92FC79;">&#39;</span><span style="color: #A5FF90;">x-init</span><span style="color: #92FC79;">&#39;</span><span style="color: #FFEE80;">()</span><span style="color: #9EFFFF;"> </span><span style="color: #E1EFFF;">{</span></div><div class='line line-highlight line-has-background' style='background-color: #1F4662'><span style="color:#c6c6c6; text-align: right; -webkit-user-select: none; user-select: none;" class="line-number">14</span><span style="color: #9EFFFF;">                </span><span style="color: #FF9D00;">return</span><span style="color: #9EFFFF;"> </span><span style="color: #E1EFFF;">window.location.hash</span><span style="color: #9EFFFF;"> </span><span style="color: #FF9D00;">===</span><span style="color: #9EFFFF;"> </span><span style="color: #92FC79;">&#39;</span><span style="color: #A5FF90;">#map</span><span style="color: #92FC79;">&#39;</span></div><div class='line line-highlight line-has-background' style='background-color: #1F4662'><span style="color:#c6c6c6; text-align: right; -webkit-user-select: none; user-select: none;" class="line-number">15</span><span style="color: #9EFFFF;">                    </span><span style="color: #FF9D00;">?</span><span style="color: #9EFFFF;"> </span><span style="color: #E1EFFF;">(</span><span style="color: #FB94FF;">this</span><span style="color: #E1EFFF;">.open</span><span style="color: #9EFFFF;"> </span><span style="color: #FF9D00;">=</span><span style="color: #9EFFFF;"> </span><span style="color: #FF628C;">true</span><span style="color: #E1EFFF;">,</span><span style="color: #9EFFFF;"> </span><span style="color: #FB94FF;">this</span><span style="color: #E1EFFF;">.</span><span style="color: #FFC600;">$nextTick</span><span style="color: #E1EFFF;">(</span><span style="color: #FFEE80;">()</span><span style="color: #9EFFFF;"> </span><span style="color: #FFC600;">=&gt;</span><span style="color: #9EFFFF;"> </span><span style="color: #E1EFFF;">{</span><span style="color: #9EFFFF;"> </span><span style="color: #FF9D00;">setTimeout</span><span style="color: #E1EFFF;">(</span><span style="color: #FFEE80;">()</span><span style="color: #9EFFFF;"> </span><span style="color: #FFC600;">=&gt;</span><span style="color: #9EFFFF;"> </span><span style="color: #E1EFFF;">{</span><span style="color: #9EFFFF;"> </span><span style="color: #FB94FF;">this</span><span style="color: #E1EFFF;">.</span><span style="color: #FFC600;">renderMap</span><span style="color: #E1EFFF;">(),</span><span style="color: #9EFFFF;"> </span><span style="color: #FB94FF;">this</span><span style="color: #E1EFFF;">.rendered</span><span style="color: #9EFFFF;"> </span><span style="color: #FF9D00;">=</span><span style="color: #9EFFFF;"> </span><span style="color: #FF628C;">true</span><span style="color: #9EFFFF;"> </span><span style="color: #E1EFFF;">},</span><span style="color: #9EFFFF;"> </span><span style="color: #FF628C;">300</span><span style="color: #E1EFFF;">)</span><span style="color: #9EFFFF;"> </span><span style="color: #E1EFFF;">}))</span></div><div class='line line-highlight line-has-background' style='background-color: #1F4662'><span style="color:#c6c6c6; text-align: right; -webkit-user-select: none; user-select: none;" class="line-number">16</span><span style="color: #9EFFFF;">                    </span><span style="color: #FF9D00;">:</span><span style="color: #9EFFFF;"> </span><span style="color: #FB94FF;">this</span><span style="color: #E1EFFF;">.open</span><span style="color: #9EFFFF;"> </span><span style="color: #FF9D00;">=</span><span style="color: #9EFFFF;"> </span><span style="color: #FF628C;">false</span></div><div class='line line-highlight line-has-background' style='background-color: #1F4662'><span style="color:#c6c6c6; text-align: right; -webkit-user-select: none; user-select: none;" class="line-number">17</span><span style="color: #9EFFFF;">            </span><span style="color: #E1EFFF;">},</span></div><div class='line line-highlight line-has-background' style='background-color: #1F4662'><span style="color:#c6c6c6; text-align: right; -webkit-user-select: none; user-select: none;" class="line-number">18</span><span style="color: #E1EFFF;">            </span><span style="color: #0088FF;">// Update the URL hash.</span></div><div class='line line-highlight line-has-background' style='background-color: #1F4662'><span style="color:#c6c6c6; text-align: right; -webkit-user-select: none; user-select: none;" class="line-number">19</span><span style="color: #9EFFFF;">            </span><span style="color: #92FC79;">&#39;</span><span style="color: #A5FF90;">x-effect</span><span style="color: #92FC79;">&#39;</span><span style="color: #FFEE80;">()</span><span style="color: #9EFFFF;"> </span><span style="color: #E1EFFF;">{</span></div><div class='line line-highlight line-has-background' style='background-color: #1F4662'><span style="color:#c6c6c6; text-align: right; -webkit-user-select: none; user-select: none;" class="line-number">20</span><span style="color: #9EFFFF;">                </span><span style="color: #FF9D00;">return</span><span style="color: #9EFFFF;"> </span><span style="color: #FB94FF;">this</span><span style="color: #E1EFFF;">.open</span></div><div class='line line-highlight line-has-background' style='background-color: #1F4662'><span style="color:#c6c6c6; text-align: right; -webkit-user-select: none; user-select: none;" class="line-number">21</span><span style="color: #9EFFFF;">                    </span><span style="color: #FF9D00;">?</span><span style="color: #9EFFFF;"> </span><span style="color: #E1EFFF;">history.</span><span style="color: #FFC600;">pushState</span><span style="color: #E1EFFF;">({},</span><span style="color: #9EFFFF;"> </span><span style="color: #92FC79;">&#39;&#39;</span><span style="color: #E1EFFF;">,</span><span style="color: #9EFFFF;"> </span><span style="color: #92FC79;">&#39;</span><span style="color: #A5FF90;">#map</span><span style="color: #92FC79;">&#39;</span><span style="color: #E1EFFF;">)</span></div><div class='line line-highlight line-has-background' style='background-color: #1F4662'><span style="color:#c6c6c6; text-align: right; -webkit-user-select: none; user-select: none;" class="line-number">22</span><span style="color: #9EFFFF;">                    </span><span style="color: #FF9D00;">:</span><span style="color: #9EFFFF;"> </span><span style="color: #E1EFFF;">history.</span><span style="color: #FFC600;">pushState</span><span style="color: #E1EFFF;">({},</span><span style="color: #9EFFFF;"> </span><span style="color: #92FC79;">&#39;&#39;</span><span style="color: #E1EFFF;">,</span><span style="color: #9EFFFF;"> </span><span style="color: #E1EFFF;">window.location.pathname)</span></div><div class='line line-highlight line-has-background' style='background-color: #1F4662'><span style="color:#c6c6c6; text-align: right; -webkit-user-select: none; user-select: none;" class="line-number">23</span><span style="color: #9EFFFF;">            </span><span style="color: #E1EFFF;">},</span></div><div class='line'><span style="color:#aaa; text-align: right; -webkit-user-select: none; user-select: none;" class="line-number">24</span><span style="color: #E1EFFF;">            </span><span style="color: #0088FF;">// Focus trap the modal.</span></div><div class='line'><span style="color:#aaa; text-align: right; -webkit-user-select: none; user-select: none;" class="line-number">25</span><span style="color: #9EFFFF;">            </span><span style="color: #92FC79;">&#39;</span><span style="color: #A5FF90;">x-trap.inert.noscroll</span><span style="color: #92FC79;">&#39;</span><span style="color: #FFEE80;">()</span><span style="color: #9EFFFF;"> </span><span style="color: #E1EFFF;">{</span></div><div class='line'><span style="color:#aaa; text-align: right; -webkit-user-select: none; user-select: none;" class="line-number">26</span><span style="color: #9EFFFF;">                </span><span style="color: #FF9D00;">return</span><span style="color: #9EFFFF;"> </span><span style="color: #FB94FF;">this</span><span style="color: #E1EFFF;">.open</span></div><div class='line'><span style="color:#aaa; text-align: right; -webkit-user-select: none; user-select: none;" class="line-number">27</span><span style="color: #9EFFFF;">            </span><span style="color: #E1EFFF;">},</span></div><div class='line line-highlight line-has-background' style='background-color: #1F4662'><span style="color:#c6c6c6; text-align: right; -webkit-user-select: none; user-select: none;" class="line-number">28</span><span style="color: #E1EFFF;">            </span><span style="color: #0088FF;">// Listen to an open-map event and when it&#39;s dispatched open the modal and render the map. </span></div><div class='line line-highlight line-has-background' style='background-color: #1F4662'><span style="color:#c6c6c6; text-align: right; -webkit-user-select: none; user-select: none;" class="line-number">29</span><span style="color: #9EFFFF;">            </span><span style="color: #92FC79;">&#39;</span><span style="color: #A5FF90;">@open-map.window</span><span style="color: #92FC79;">&#39;</span><span style="color: #FFEE80;">()</span><span style="color: #9EFFFF;"> </span><span style="color: #E1EFFF;">{</span></div><div class='line line-highlight line-has-background' style='background-color: #1F4662'><span style="color:#c6c6c6; text-align: right; -webkit-user-select: none; user-select: none;" class="line-number">30</span><span style="color: #9EFFFF;">                </span><span style="color: #FF9D00;">return</span><span style="color: #9EFFFF;"> </span><span style="color: #FB94FF;">this</span><span style="color: #E1EFFF;">.rendered</span></div><div class='line line-highlight line-has-background' style='background-color: #1F4662'><span style="color:#c6c6c6; text-align: right; -webkit-user-select: none; user-select: none;" class="line-number">31</span><span style="color: #9EFFFF;">                    </span><span style="color: #FF9D00;">?</span><span style="color: #9EFFFF;"> </span><span style="color: #FB94FF;">this</span><span style="color: #E1EFFF;">.open</span><span style="color: #9EFFFF;"> </span><span style="color: #FF9D00;">=</span><span style="color: #9EFFFF;"> </span><span style="color: #FF628C;">true</span></div><div class='line line-highlight line-has-background' style='background-color: #1F4662'><span style="color:#c6c6c6; text-align: right; -webkit-user-select: none; user-select: none;" class="line-number">32</span><span style="color: #9EFFFF;">                    </span><span style="color: #FF9D00;">:</span><span style="color: #9EFFFF;"> </span><span style="color: #E1EFFF;">(</span><span style="color: #FB94FF;">this</span><span style="color: #E1EFFF;">.open</span><span style="color: #9EFFFF;"> </span><span style="color: #FF9D00;">=</span><span style="color: #9EFFFF;"> </span><span style="color: #FF628C;">true</span><span style="color: #E1EFFF;">,</span><span style="color: #9EFFFF;"> </span><span style="color: #FB94FF;">this</span><span style="color: #E1EFFF;">.</span><span style="color: #FFC600;">$nextTick</span><span style="color: #E1EFFF;">(</span><span style="color: #FFEE80;">()</span><span style="color: #9EFFFF;"> </span><span style="color: #FFC600;">=&gt;</span><span style="color: #9EFFFF;"> </span><span style="color: #E1EFFF;">{</span><span style="color: #9EFFFF;"> </span><span style="color: #FF9D00;">setTimeout</span><span style="color: #E1EFFF;">(</span><span style="color: #FFEE80;">()</span><span style="color: #9EFFFF;"> </span><span style="color: #FFC600;">=&gt;</span><span style="color: #9EFFFF;"> </span><span style="color: #E1EFFF;">{</span><span style="color: #9EFFFF;"> </span><span style="color: #FB94FF;">this</span><span style="color: #E1EFFF;">.</span><span style="color: #FFC600;">renderMap</span><span style="color: #E1EFFF;">(),</span><span style="color: #9EFFFF;"> </span><span style="color: #FB94FF;">this</span><span style="color: #E1EFFF;">.rendered</span><span style="color: #9EFFFF;"> </span><span style="color: #FF9D00;">=</span><span style="color: #9EFFFF;"> </span><span style="color: #FF628C;">true</span><span style="color: #9EFFFF;"> </span><span style="color: #E1EFFF;">},</span><span style="color: #9EFFFF;"> </span><span style="color: #FF628C;">300</span><span style="color: #E1EFFF;">)</span><span style="color: #9EFFFF;"> </span><span style="color: #E1EFFF;">}))</span></div><div class='line line-highlight line-has-background' style='background-color: #1F4662'><span style="color:#c6c6c6; text-align: right; -webkit-user-select: none; user-select: none;" class="line-number">33</span><span style="color: #9EFFFF;">            </span><span style="color: #E1EFFF;">},</span></div><div class='line line-highlight line-has-background' style='background-color: #1F4662'><span style="color:#c6c6c6; text-align: right; -webkit-user-select: none; user-select: none;" class="line-number">34</span><span style="color: #E1EFFF;">            </span><span style="color: #0088FF;">// Close the map with escape.</span></div><div class='line'><span style="color:#aaa; text-align: right; -webkit-user-select: none; user-select: none;" class="line-number">35</span><span style="color: #9EFFFF;">            </span><span style="color: #92FC79;">&#39;</span><span style="color: #A5FF90;">@keydown.window.escape</span><span style="color: #92FC79;">&#39;</span><span style="color: #FFEE80;">()</span><span style="color: #9EFFFF;"> </span><span style="color: #E1EFFF;">{</span></div><div class='line'><span style="color:#aaa; text-align: right; -webkit-user-select: none; user-select: none;" class="line-number">36</span><span style="color: #9EFFFF;">                </span><span style="color: #FB94FF;">this</span><span style="color: #E1EFFF;">.open</span><span style="color: #9EFFFF;"> </span><span style="color: #FF9D00;">=</span><span style="color: #9EFFFF;"> </span><span style="color: #FF628C;">false</span></div><div class='line'><span style="color:#aaa; text-align: right; -webkit-user-select: none; user-select: none;" class="line-number">37</span><span style="color: #9EFFFF;">            </span><span style="color: #E1EFFF;">}</span></div><div class='line'><span style="color:#aaa; text-align: right; -webkit-user-select: none; user-select: none;" class="line-number">38</span><span style="color: #9EFFFF;">        </span><span style="color: #E1EFFF;">},</span></div><div class='line'><span style="color:#aaa; text-align: right; -webkit-user-select: none; user-select: none;" class="line-number">39</span><span style="color: #9EFFFF;">        button</span><span style="color: #E1EFFF;">:</span><span style="color: #9EFFFF;"> </span><span style="color: #E1EFFF;">{</span></div><div class='line'><span style="color:#aaa; text-align: right; -webkit-user-select: none; user-select: none;" class="line-number">40</span><span style="color: #E1EFFF;">            </span><span style="color: #0088FF;">// The close button in the modal.</span></div><div class='line'><span style="color:#aaa; text-align: right; -webkit-user-select: none; user-select: none;" class="line-number">41</span><span style="color: #9EFFFF;">            </span><span style="color: #92FC79;">&#39;</span><span style="color: #A5FF90;">@click</span><span style="color: #92FC79;">&#39;</span><span style="color: #FFEE80;">()</span><span style="color: #9EFFFF;"> </span><span style="color: #E1EFFF;">{</span></div><div class='line'><span style="color:#aaa; text-align: right; -webkit-user-select: none; user-select: none;" class="line-number">42</span><span style="color: #9EFFFF;">                </span><span style="color: #FB94FF;">this</span><span style="color: #E1EFFF;">.open</span><span style="color: #9EFFFF;"> </span><span style="color: #FF9D00;">=</span><span style="color: #9EFFFF;"> </span><span style="color: #FF628C;">false</span></div><div class='line'><span style="color:#aaa; text-align: right; -webkit-user-select: none; user-select: none;" class="line-number">43</span><span style="color: #9EFFFF;">            </span><span style="color: #E1EFFF;">}</span></div><div class='line'><span style="color:#aaa; text-align: right; -webkit-user-select: none; user-select: none;" class="line-number">44</span><span style="color: #9EFFFF;">        </span><span style="color: #E1EFFF;">},</span></div><div class='line'><span style="color:#aaa; text-align: right; -webkit-user-select: none; user-select: none;" class="line-number">45</span><span style="color: #9EFFFF;">        </span><span style="color: #FFC600;">renderMap</span><span style="color: #FFEE80;">()</span><span style="color: #9EFFFF;"> </span><span style="color: #E1EFFF;">{</span></div><div class='line'><span style="color:#aaa; text-align: right; -webkit-user-select: none; user-select: none;" class="line-number">46</span><span style="color: #E1EFFF;">            </span><span style="color: #0088FF;">// All of the above Mapbox logic.</span></div><div class='line'><span style="color:#aaa; text-align: right; -webkit-user-select: none; user-select: none;" class="line-number">47</span><span style="color: #9EFFFF;">        </span><span style="color: #E1EFFF;">}</span></div><div class='line'><span style="color:#aaa; text-align: right; -webkit-user-select: none; user-select: none;" class="line-number">48</span><span style="color: #9EFFFF;">    </span><span style="color: #E1EFFF;">}</span></div><div class='line'><span style="color:#aaa; text-align: right; -webkit-user-select: none; user-select: none;" class="line-number">49</span><span style="color: #E1EFFF;">}</span></div>";s:6:"styles";s:65:"background-color: #193549; --theme-selection-background: #027dff;";s:7:"classes";s:30:"torchlight has-highlight-lines";s:5:"attrs";a:2:{s:10:"data-theme";s:7:"cobalt2";s:9:"data-lang";s:10:"javascript";}}