{{#
	@name Project
	@desc The Project page builder block.
    @set page.page_builder.project
#}}

<!-- /page_builder/_project.antlers.html -->
{{
    project = block:project
        ? block:project
        : ({ collection:projects sort="date:desc" limit="1" } | first)
}}
<section
    x-data="{ hover: false }"
    x-id="['project-title']"
    class="relative fluid-container grid md:grid-cols-12 md:gap-8"
>
    <a
        href="{{ project:url }}"
        class="relative md:col-span-7 md:col-start-1 md:row-span-3 md:row-start-2 border border-b-0 md:border-b border-primary dark:border-secondary p-6 pb-12 md:p-8 flex flex-col gap-y-8 justify-between group"
        @mouseover="hover = true"
        @mouseout="hover = false"
        :aria-labelledby="$id('project-title')"
        draggable="false"
    >
        {{ partial:components/project_content }}
        <div
            class="hidden md:flex absolute inset-0 bg-primary dark:bg-secondary p-6 pb-12 md:p-8 flex-col space-y-8 justify-between motion-safe:transition-[clip-path] motion-safe:duration-500 ease-out" aria-hidden="true"
            :class="{
                '[clip-path:circle(170%_at_120%_120%)]': hover,
                '[clip-path:circle(20%_at_120%_120%)]': !hover
            }"
        >
            {{ partial:components/project_content color="text-white" }}
        </div>
    </a>
    <a
        href="{{ project:url }}"
        draggable="false"
        :aria-labelledby="$id('project-title')"
        @mouseover="hover = true"
        @mouseout="hover = false"
        class="relative -mt-6 md:mt-0 md:col-span-7 md:col-start-6 md:row-span-3 md:row-start-1 rounded-t-lg motion-safe:transition ease-out"
        :class="{ 'md:-rotate-1': hover }"
    >
        {{ partial:components/title_bar }}
        <figure class="aspect-w-4 aspect-h-3 border border-primary dark:border-secondary">
            {{ partial:components/picture :image="project:image" cover="true" lazy="true" sizes="(min-width: 768px) 66vw, 90vw"  }}
        </figure>
    </a>

    <aside class="md:col-span-5 md:row-start-4 md:col-start-8 place-self-end flex flex-col justify-center items-end pt-4 pb-10">
        {{ partial:components/button label="{ trans:strings.projects_all }" link_type="url" url="{mount_url from='projects'}" }}
    </aside>

    {{ partial:components/background_text }}
</section>
<!-- End: /page_builder/_project.antlers.html -->
